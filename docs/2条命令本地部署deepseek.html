<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>2条命令本地部署deepseek - Laumy的技术栈</title>
    <link rel="stylesheet" href="../../assets/style.css">
    <!-- MathJax支持LaTeX数学公式 -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="../../">Laumy的技术栈</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="输入关键词回车搜索">
        </div>
        <div class="theme-toggle" title="切换主题" id="theme-toggle">☾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="../../">首页</a></div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">文章目录</div>
          <nav id="toc"><ul><li><a href="#1-ollama">命令1： 安装ollama</a><ul></ul></li><li><a href="#2deepseek">命令2：下载deepseek模型</a><ul></ul></li><li><a href="#gguf">GGUF导入部署</a><ul><li><a href="#_1">创建模型</a></li><li><a href="#_2">运行模型</a></li></ul></li><li><a href="#api">支持API访问</a><ul><li><a href="#ollama">修改ollama的本地端口</a></li><li><a href="#api_1">远程API调用示例</a></li></ul></li><li><a href="#web">支持web聊天</a><ul><li><a href="#docker">安装docker</a></li><li><a href="#dockeropen-webui">docker安装open webui</a></li></ul></li></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>2条命令本地部署deepseek</h1>
  <div class="meta">2025-02-10 · ai</div>
  <div class="post-content"><p>环境是centos，下面是部署步骤。</p>
<h2 id="1-ollama">命令1： 安装ollama</h2>
<div class="codehilite"><pre><span></span><code><span class="n">安装命令</span><span class="err">：</span><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">fsSL</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//ollama.com/install.sh | sh</span>
<span class="n">安装日志</span><span class="err">：</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Cleaning</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ollama</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Installing</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Downloading</span><span class="w"> </span><span class="n">Linux</span><span class="w"> </span><span class="n">amd64</span><span class="w"> </span><span class="n">bundle</span>
<span class="cp">######################################################################## 100.0%</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Creating</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">user</span><span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Adding</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">video</span><span class="w"> </span><span class="n">group</span><span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Adding</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">group</span><span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Creating</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">systemd</span><span class="w"> </span><span class="n">service</span><span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Enabling</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">ollama</span><span class="w"> </span><span class="n">service</span><span class="p">...</span>
<span class="n">Created</span><span class="w"> </span><span class="n">symlink</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="k">default</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">wants</span><span class="o">/</span><span class="n">ollama</span><span class="p">.</span><span class="n">service</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">ollama</span><span class="p">.</span><span class="n">service</span><span class="p">.</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">Ollama</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mf">127.0.0.1</span><span class="o">:</span><span class="mf">11434.</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">Install</span><span class="w"> </span><span class="n">complete</span><span class="p">.</span><span class="w"> </span><span class="n">Run</span><span class="w"> </span><span class="s">"ollama"</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">line</span><span class="p">.</span>
</code></pre></div>
<h2 id="2deepseek">命令2：下载deepseek模型</h2>
<div class="codehilite"><pre><span></span><code><span class="n">安装命令</span><span class="err">：</span><span class="n">ollama</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">deepseek</span><span class="o">-</span><span class="n">r1</span><span class="o">:</span><span class="mi">7</span><span class="n">b</span>
<span class="n">安装完成后</span><span class="err">，</span><span class="n">会直接进入交互控制台</span><span class="err">：</span>

<span class="n">pulling</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">pulling</span><span class="w"> </span><span class="mi">96</span><span class="n">c415656d37</span><span class="p">...</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="err">▕█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏</span><span class="w"> </span><span class="mf">4.7</span><span class="w"> </span><span class="n">GB</span>
<span class="n">pulling</span><span class="w"> </span><span class="mi">369</span><span class="n">ca498f347</span><span class="p">...</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="err">▕█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏</span><span class="w">  </span><span class="mi">387</span><span class="w"> </span><span class="n">B</span>
<span class="n">pulling</span><span class="w"> </span><span class="mf">6e4</span><span class="n">c38e1172f</span><span class="p">...</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="err">▕█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏</span><span class="w"> </span><span class="mf">1.1</span><span class="w"> </span><span class="n">KB</span>
<span class="n">pulling</span><span class="w"> </span><span class="n">f4d24e9138dd</span><span class="p">...</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="err">▕█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏</span><span class="w">  </span><span class="mi">148</span><span class="w"> </span><span class="n">B</span>
<span class="n">pulling</span><span class="w"> </span><span class="mf">40f</span><span class="n">b844194b2</span><span class="p">...</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="err">▕█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏</span><span class="w">  </span><span class="mi">487</span><span class="w"> </span><span class="n">B</span>
<span class="n">verifying</span><span class="w"> </span><span class="n">sha256</span><span class="w"> </span><span class="n">digest</span>
<span class="n">writing</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">success</span>
<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">hello</span>
<span class="o">&lt;</span><span class="n">think</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">think</span><span class="o">&gt;</span>

<span class="n">Hello</span><span class="o">!</span><span class="w"> </span><span class="n">How</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">assist</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">today</span><span class="o">?</span><span class="w"> </span><span class="err">😊</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">你好</span>
<span class="o">&lt;</span><span class="n">think</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">think</span><span class="o">&gt;</span>

<span class="n">你好</span><span class="err">！</span><span class="n">有什么我可以帮助你的吗</span><span class="err">？😊</span>

<span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">你是什么模型</span>
<span class="o">&lt;</span><span class="n">think</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">think</span><span class="o">&gt;</span>

<span class="n">您好</span><span class="err">！</span><span class="n">我是由中国的深度求索</span><span class="err">（</span><span class="n">DeepSeek</span><span class="err">）</span><span class="n">公司开发的智能助手DeepSeek</span><span class="o">-</span><span class="n">R1</span><span class="err">。</span><span class="n">如您有任何任何问题</span><span class="err">，</span><span class="n">我会尽我所能为您提供帮助</span><span class="err">。</span>
</code></pre></div>
<p>运行时，如果加上--verbose可以查看运行性能参数，如下：</p>
<div class="codehilite"><pre><span></span><code><span class="n">total</span><span class="w"> </span><span class="n">duration</span><span class="o">:</span><span class="w">       </span><span class="mf">379.511567</span><span class="n">ms</span>
<span class="n">load</span><span class="w"> </span><span class="n">duration</span><span class="o">:</span><span class="w">        </span><span class="mf">14.749448</span><span class="n">ms</span>
<span class="n">prompt</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">count</span><span class="o">:</span><span class="w">    </span><span class="mi">60</span><span class="w"> </span><span class="n">token</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">prompt</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">duration</span><span class="o">:</span><span class="w"> </span><span class="mf">15.863495</span><span class="n">ms</span>
<span class="n">prompt</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="n">rate</span><span class="o">:</span><span class="w">     </span><span class="mf">3782.27</span><span class="w"> </span><span class="n">tokens</span><span class="o">/</span><span class="n">s</span>
<span class="n">eval</span><span class="w"> </span><span class="n">count</span><span class="o">:</span><span class="w">           </span><span class="mi">64</span><span class="w"> </span><span class="n">token</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">eval</span><span class="w"> </span><span class="n">duration</span><span class="o">:</span><span class="w">        </span><span class="mf">322.980292</span><span class="n">ms</span>
<span class="n">eval</span><span class="w"> </span><span class="n">rate</span><span class="o">:</span><span class="w">            </span><span class="mf">198.15</span><span class="w"> </span><span class="n">tokens</span><span class="o">/</span><span class="n">s</span>
</code></pre></div>
<ul>
<li>total duration:总耗时379.51ms，表示从请求开始到响应完成的整体处理时间</li>
<li>load duration: 模型加载耗时14.75ms，可能涉及模型初始化或数据加载阶段的时间消耗</li>
<li>prompt eval count:输入提示词（prompt）解析的token数量为60个</li>
<li>prompt eval duration:提示词解析耗时15.86ms，反映模型对输入文本的预处理效率</li>
<li>prompt eval rate: 提示词解析速率3782.27 tokens/s，属于高性能表现（通常千级tokens/s为优秀）</li>
<li>eval count: 生成输出的token数量为64个</li>
<li>eval duration: 生成耗时322.98ms，占整体耗时的主要部分。</li>
<li>eval rate: 生成速率198.15 tokens/s，属于典型的大模型推理速度（百级tokens/s为常见范围）</li>
</ul>
<h2 id="gguf">GGUF导入部署</h2>
<p>这种方式可以通过导入GUFF格式的大模型，GUFF格式大模型可以从Hugging Face获取<a href="https://huggingface.co/">https://huggingface.co/</a>。也可以在modelscope上获取<a href="https://modelscope.cn/models">https://modelscope.cn/models</a>。</p>
<p>首先从Hugging Face或者modelscope下载GGUF格式的模型，然后部署主要分为两个步骤</p>
<h3 id="_1">创建模型</h3>
<p>通过create指定模型modelfile。</p>
<div class="codehilite"><pre><span></span><code><span class="n">ollama</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">qwen2</span><span class="mf">.5</span><span class="o">:</span><span class="mi">7</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">qwen2</span><span class="mf">.5</span><span class="mi">-7</span><span class="n">b</span><span class="p">.</span><span class="n">modelfile</span>
</code></pre></div>
<p>modelfile内容如下，指定了模型的路径，模型配置文件描述了模型的参数，更多信息这里不做阐述。</p>
<div class="codehilite"><pre><span></span><code><span class="n">FROM</span><span class="w"> </span><span class="s">"./qwen2.5-7b-instruct-q4_0.gguf"</span>
</code></pre></div>
<h3 id="_2">运行模型</h3>
<div class="codehilite"><pre><span></span><code><span class="n">列出模型</span>
<span class="n">ollama</span><span class="w"> </span><span class="n">list</span>

<span class="n">运行模型</span><span class="w"> </span><span class="n">verbose参数可以打印性能</span><span class="err">。</span>
<span class="n">ollama</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">qwen2</span><span class="mf">.5</span><span class="o">:</span><span class="mi">7</span><span class="n">b</span><span class="w"> </span><span class="o">--</span><span class="n">verbose</span>
</code></pre></div>
<p>也可以使用ollama pull从ollama官方下载，<a href="https://ollama.com/search">https://ollama.com/search</a></p>
<h2 id="api">支持API访问</h2>
<h3 id="ollama">修改ollama的本地端口</h3>
<div class="codehilite"><pre><span></span><code><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">ollama</span><span class="p">.</span><span class="n">service</span>

<span class="p">[</span><span class="n">Unit</span><span class="p">]</span>
<span class="n">Description</span><span class="o">=</span><span class="n">Ollama</span><span class="w"> </span><span class="n">Service</span>
<span class="n">After</span><span class="o">=</span><span class="n">network</span><span class="o">-</span><span class="n">online</span><span class="p">.</span><span class="n">target</span>

<span class="p">[</span><span class="n">Service</span><span class="p">]</span>
<span class="n">ExecStart</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ollama</span><span class="w"> </span><span class="n">serve</span>
<span class="n">User</span><span class="o">=</span><span class="n">ollama</span>
<span class="n">Group</span><span class="o">=</span><span class="n">ollama</span>
<span class="n">Restart</span><span class="o">=</span><span class="n">always</span>
<span class="n">RestartSec</span><span class="o">=</span><span class="mi">3</span>
<span class="n">Environment</span><span class="o">=</span><span class="s">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin"</span>
<span class="n">Environment</span><span class="o">=</span><span class="s">"OLLAMA_HOST=0.0.0.0"</span>

<span class="p">[</span><span class="n">Install</span><span class="p">]</span>
<span class="n">WantedBy</span><span class="o">=</span><span class="k">default</span><span class="p">.</span><span class="n">target</span>

<span class="n">然后重新启动</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">restart</span><span class="w"> </span><span class="n">ollama</span>

<span class="n">确认是否启动成功</span><span class="err">：</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">netstat</span><span class="w"> </span><span class="o">-</span><span class="n">tulpn</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="mi">11434</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">确认监听0</span><span class="mf">.0.0.0</span><span class="o">:</span><span class="mi">11434</span><span class="o">:</span><span class="n">cite</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">:</span><span class="n">cite</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
</code></pre></div>
<h3 id="api_1">远程API调用示例</h3>
<div class="codehilite"><pre><span></span><code><span class="cp"># 查询API版本（验证连通性）</span>
<span class="n">curl</span><span class="w"> </span><span class="n">http</span><span class="o">:</span><span class="c1">//&lt;服务器公网IP&gt;:11434/api/version</span>

<span class="cp"># 发送生成请求</span>
<span class="n">curl</span><span class="w"> </span><span class="n">http</span><span class="o">:</span><span class="c1">//localhost:11434/api/generate -d "{\\\\\\\\\\\\\\\\"model\\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\\"deepseek-r1:7b\\\\\\\\\\\\\\\\", \\\\\\\\\\\\\\\\"prompt\\\\\\\\\\\\\\\\": \\\\\\\\\\\\\\\\"为什么草是绿的\\\\\\\\\\\\\\\\"}"</span>
</code></pre></div>
<p>参考：https://github.com/datawhalechina/handy-ollama/blob/main/docs/C4/1.%20Ollama%20API%20%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.md</p>
<h2 id="web">支持web聊天</h2>
<h3 id="docker">安装docker</h3>
<p>如果要按照网页版的聊天需要安装open ui，先安装docker。</p>
<div class="codehilite"><pre><span></span><code><span class="err">（</span><span class="mi">1</span><span class="err">）</span><span class="n">更新系统</span>

<span class="n">sudo</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>

<span class="err">（</span><span class="mi">2</span><span class="err">）</span><span class="n">Docker</span><span class="w"> </span><span class="n">需要一些依赖包</span><span class="err">，</span><span class="n">你可以通过运行以下命令来安装</span><span class="err">：</span>

<span class="n">sudo</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">yum</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">device</span><span class="o">-</span><span class="n">mapper</span><span class="o">-</span><span class="n">persistent</span><span class="o">-</span><span class="n">data</span><span class="w"> </span><span class="n">lvm2</span>

<span class="err">（</span><span class="mi">3</span><span class="err">）</span><span class="n">更新本地镜像源</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">yum</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">repo</span><span class="w"> </span><span class="n">https</span><span class="o">:</span><span class="c1">//mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span>

<span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="err">'</span><span class="n">s</span><span class="o">/</span><span class="n">download</span><span class="p">.</span><span class="n">docker</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">mirrors</span><span class="p">.</span><span class="n">aliyun</span><span class="p">.</span><span class="n">com</span><span class="err">\\\\\\\\\\\\\\\\</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">/</span><span class="n">g</span><span class="err">'</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">yum</span><span class="p">.</span><span class="n">repos</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="p">.</span><span class="n">repo</span>

<span class="n">yum</span><span class="w"> </span><span class="n">makecache</span><span class="w"> </span><span class="n">fast</span>

<span class="err">（</span><span class="mi">4</span><span class="err">）</span><span class="n">安装docker</span>

<span class="n">sudo</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">-</span><span class="n">y</span><span class="w"> </span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span>

<span class="err">（</span><span class="mi">5</span><span class="err">）</span><span class="n">设置开机自启动</span>

<span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">docker</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">docker</span>

<span class="err">（</span><span class="mi">6</span><span class="err">）</span><span class="n">验证</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="o">--</span><span class="n">version</span>
<span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">docker</span>
</code></pre></div>
<h3 id="dockeropen-webui">docker安装open webui</h3>
<p>拉取并运行 Open WebUI 容器，将容器端口 8080 映射到主机 3000 端口</p>
<div class="codehilite"><pre><span></span><code><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">3000</span><span class="o">:</span><span class="mi">8080</span><span class="w">   </span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">.</span><span class="n">docker</span><span class="p">.</span><span class="n">internal</span><span class="o">:</span><span class="n">host</span><span class="o">-</span><span class="n">gateway</span><span class="w">   </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">:/</span><span class="n">app</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">data</span><span class="w">   </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="w">   </span><span class="o">--</span><span class="n">restart</span><span class="w"> </span><span class="n">always</span><span class="w">   </span><span class="n">ghcr</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">:</span><span class="n">main</span>

<span class="n">如果3000端口被占用了</span><span class="err">，</span><span class="n">会报错</span><span class="err">，</span><span class="n">重新启动也会提示错误如下</span><span class="err">。</span>
</code></pre></div>
<p>报错解决：</p>
<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="mi">6664</span><span class="o">:</span><span class="mi">8080</span><span class="w">   </span><span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">.</span><span class="n">docker</span><span class="p">.</span><span class="n">internal</span><span class="o">:</span><span class="n">host</span><span class="o">-</span><span class="n">gateway</span><span class="w">   </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">:/</span><span class="n">app</span><span class="o">/</span><span class="n">backend</span><span class="o">/</span><span class="n">data</span><span class="w">   </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="w">   </span><span class="o">--</span><span class="n">restart</span><span class="w"> </span><span class="n">always</span><span class="w">   </span><span class="n">ghcr</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">:</span><span class="n">main</span>
<span class="nl">docker</span><span class="p">:</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">daemon</span><span class="o">:</span><span class="w"> </span><span class="n">Conflict</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="s">"/open-webui"</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="s">"88f6e12e8e3814038911c30d788cb222d0792a9fc0af45f41140e07186e62a16"</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="p">(</span><span class="n">or</span><span class="w"> </span><span class="n">rename</span><span class="p">)</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">able</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">reuse</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">name</span><span class="p">.</span>

<span class="n">你遇到的问题是</span><span class="w"> </span><span class="n">Docker</span><span class="w"> </span><span class="n">容器名称冲突</span><span class="err">。</span><span class="n">错误消息表明</span><span class="err">，</span><span class="n">容器名称</span><span class="w"> </span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="w"> </span><span class="n">已经被另一个正在运行的容器占用</span><span class="err">，</span><span class="n">因此你无法启动新的容器</span><span class="err">。</span>

<span class="w"> </span><span class="err">（</span><span class="mi">1</span><span class="err">）</span><span class="n">查看当前运行的容器</span><span class="err">：</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">-</span><span class="n">a</span>
<span class="w"> </span><span class="mf">88f6e12</span><span class="n">e8e38</span><span class="w">   </span><span class="n">ghcr</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">/</span><span class="n">open</span><span class="o">-</span><span class="n">webui</span><span class="o">:</span><span class="n">main</span><span class="w">   </span><span class="s">"bash start.sh"</span><span class="w">   </span><span class="mi">3</span><span class="w"> </span><span class="n">minutes</span><span class="w"> </span><span class="n">ago</span><span class="w">   </span><span class="n">Created</span><span class="w">             </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span>

<span class="err">（</span><span class="mi">2</span><span class="err">）</span><span class="n">停止并删除已有的容器</span>
<span class="n">docker</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span>
<span class="n">docker</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">webui</span>
</code></pre></div>
<p>登录网址https://xxx:6664 配置即可访问。</p></div>
  <div class="post-nav">
    <a class="prev" href="../../裁剪脚本.html">← 裁剪脚本</a>
    <a class="next" href="../../豆包大模型接入体验.html">豆包大模型接入体验 →</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright ©2022-2025 laumy 版权所有</div>
    </footer>

    <script src="../../assets/site.js"></script>
  </body>
  </html>

