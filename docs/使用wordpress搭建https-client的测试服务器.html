<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>使用wordpress搭建https client的测试服务器 - Laumy的技术栈</title>
    <link rel="stylesheet" href="/assets/style.css">
    <!-- MathJax支持LaTeX数学公式 -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          ignoreHtmlClass: 'tex2jax_ignore',
          processHtmlClass: 'tex2jax_process'
        }
      };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <a class="logo" href="/">Laumy的技术栈</a>
        <div class="search">
          <input id="search-input" type="text" placeholder="输入关键词回车搜索">
        </div>
        <div class="theme-toggle" title="切换主题" id="theme-toggle">☾</div>
        <nav class="top-nav">
          <div class="nav-item"><a href="/">首页</a></div>
        </nav>
      </div>
    </header>

    <main class="container layout">
      <aside class="left-nav">
        
        <div class="card">
          <div class="card-title">文章目录</div>
          <nav id="toc"><ul></ul></nav>
        </div>
        
      </aside>

      <section class="content">
        
<article class="card post">
  <h1>使用wordpress搭建https client的测试服务器</h1>
  <div class="meta">2023-12-06 · 其他</div>
  <div class="post-content"><p>前置条件：将wordpress设置为固定链接，参考前面章节<a href="https://www.laumy.tech/968.html">https://www.laumy.tech/968.html</a> 进行先设置。</p>
<p>外观-&gt;主题编辑器-&gt;function.php添加以下代码：</p>
<div class="codehilite"><pre><span></span><code><span class="n">add_action</span><span class="p">(</span><span class="w"> </span><span class="err">'</span><span class="n">rest_api_init</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// GET请求的路由</span>
<span class="w">    </span><span class="n">register_rest_route</span><span class="p">(</span><span class="w"> </span><span class="err">'</span><span class="n">mytest</span><span class="o">/</span><span class="n">v1</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">echo</span><span class="o">/</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">(</span>
<span class="w">       </span><span class="err">'</span><span class="n">methods</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">GET</span><span class="err">'</span><span class="p">,</span>
<span class="w">       </span><span class="err">'</span><span class="n">callback</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">my_test_get_endpoint</span><span class="err">'</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// POST请求的路由</span>
<span class="w">    </span><span class="n">register_rest_route</span><span class="p">(</span><span class="w"> </span><span class="err">'</span><span class="n">mytest</span><span class="o">/</span><span class="n">v1</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="o">/</span><span class="n">post</span><span class="o">-</span><span class="n">echo</span><span class="o">/</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">(</span>
<span class="w">      </span><span class="err">'</span><span class="n">methods</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">POST</span><span class="err">'</span><span class="p">,</span>
<span class="w">      </span><span class="err">'</span><span class="n">callback</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">my_test_post_endpoint</span><span class="err">'</span><span class="p">,</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// GET请求的回调函数</span>
<span class="n">function</span><span class="w"> </span><span class="nf">my_test_get_endpoint</span><span class="p">(</span><span class="w"> </span><span class="n">$data</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WP_REST_Response</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="err">'</span><span class="n">message</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">GET</span><span class="w"> </span><span class="n">response</span><span class="err">'</span><span class="p">),</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// POST请求的回调函数</span>
<span class="n">function</span><span class="w"> </span><span class="nf">my_test_post_endpoint</span><span class="p">(</span><span class="w"> </span><span class="n">$request</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">$parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">$request</span><span class="o">-&gt;</span><span class="n">get_json_params</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">WP_REST_Response</span><span class="p">(</span><span class="w"> </span><span class="n">array</span><span class="p">(</span><span class="err">'</span><span class="n">message</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">'</span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="n">response</span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="n">data</span><span class="err">'</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">$parameters</span><span class="p">),</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
  <div class="post-nav">
    <a class="prev" href="/内存相关问题排查思路.html">← 内存相关问题排查思路</a>
    <a class="next" href="/wordpress怎么被google-百度搜索到.html">wordpress怎么被google，百度搜索到。 →</a>
  </div>
</article>

      </section>

      <aside class="right-panel">
        
      </aside>
    </main>

    <footer class="site-footer">
      <div class="container">Copyright ©2022-2025 laumy 版权所有</div>
    </footer>

    <script src="/assets/site.js"></script>
  </body>
  </html>

